<!DOCTYPE html>
<html>

<head>
  <title>player.html composite</title>
  <meta charset="utf-8" />
  <meta content="width=device-width, user-scalable=no, initial-scale=1.0" name="viewport" />
  <style>
    * {
      box-sizing: border-box;
      user-select: none;
    }

    body {
      min-height: 110vh;
      overflow: hidden;
    }

    iframe {
      z-index: 10;
    }

    img {
      z-index: 20;
    }

    .iphone,
    .pixel,
    .ipad {
      position: absolute;
      -webkit-box-reflect: below 0px -webkit-gradient(linear, right top, right bottom, from(transparent), to(rgba(255, 255, 255, 0.3)));
      filter: drop-shadow(0px 3px 5px #666)
    }

    .pc {
      position: absolute;
      filter: none;
    }

    img {
      position: relative;
      display: block;
    }

    iframe {
      top: 0;
      left: 0;
      position: absolute;
      border: 0 none;
      overflow: hidden;
    }

    .pc {
      z-index: 10;
      width: 98vw;
      top: 10px;
      left: 1vw;
    }

    .pc iframe {
      width: 97vw;
      height: 41vw;
      margin-left: 1vw;
      margin-top: 1vw;
    }

    .pc img {
      width: 100%;
      max-width: 98vw;
      margin: 0 auto;
    }

    .iphone {
      z-index: 15;
      left: 13vw;
      bottom: 5vh;
      transform: scale(0.35);
      transform-origin: bottom left;
    }

    .iphone iframe {
      width: 469px;
      height: 1016px;
      margin-left: 35px;
      border-top: 3rem solid black;
      margin-top: 30px;
    }

    .pixel {
      z-index: 35;
      left: 50%;
      bottom: 3vh;
      transform: translateX(-50%) scale(0.3);
      transform-origin: bottom center;
    }

    .pixel iframe {
      width: 916px;
      height: 510px;
      margin-left: 105px;
      margin-top: 32px;
    }

    .ipad {
      z-index: 30;
      right: 4vw;
      bottom: 5vh;
      height: 1352px;
      transform: scale(0.4);
      transform-origin: bottom right;
    }

    .ipad iframe {
      bottom: 0;
      right: 0;
      width: 955px;
      height: 1274px;
      margin-top: 40px;
      margin-left: 36px;
    }
  </style>
</head>

<body>
  <div class="pc">
    <iframe src="../dist/player.html"></iframe>
    <img src="dell-monitor-template.png">
  </div>
  <div class="iphone">
    <iframe src="../dist/player.html"></iframe>
    <img src="iphone-x-template.png">
  </div>
  <div class="pixel">
    <iframe src="../dist/player.html"></iframe>
    <img src="pixel-2-xl-template.png">
  </div>
  <div class="ipad">
    <iframe src="../dist/player.html"></iframe>
    <img src="ipad-pro-template.png">
  </div>
  <script>
    function run() {
      const tapDelay = 1000;

      const frames = [...document.querySelectorAll('iframe')];
      frames.forEach((iframe) => {
        const doc = iframe.contentDocument;
        doc.querySelector('.links a:nth-child(1)').click();

        setTimeout(() => {
          doc.querySelector('.links a:nth-child(6)').click();
        }, tapDelay);

        setTimeout(() => {
          doc.querySelector('.links a:nth-child(3)').click();
        }, tapDelay * 2);
        setTimeout(() => {
          doc.querySelector('.links a:nth-child(4)').click();
        }, tapDelay * 3);

        setTimeout(() => {
          doc.querySelector('.player').pause();
          doc.querySelector('.player').style.filter = '';
          doc.querySelector('html').style.overflow = 'hidden';
        }, tapDelay * 10);
      });
    }

    /* This must be triggered by a user action due to the video playback */
    document.body.addEventListener('dblclick', run, false);
  </script>
</body>

</html>